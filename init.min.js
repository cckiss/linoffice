/*!
 * project : init
 * author : LINOFFICE
 * 디바이스 환경 및 최초 스크립트 설정
 */ let device;const uAgent=navigator.userAgent.toLowerCase(),mobiles=/iphone|ipod|ipad|android|blackberry|windows ce|nokia|webos|opera mini|sonyericsson|opera mobi|iemobile|aarch/;function createCnbHtml(){let c='<nav class="ncc-lnb ncc-lnb-type--main"><ul class="ncc-lnb-list">',n="",s="";$.each(cnb,function(c,i){var a='<ul class="ncc-lnb-item__sub">';$.each(i._subs,function(c,n){a+='<li class="s'+n.id+'"><a href="'+n.href+'" target="_self"><span>'+n.desc+"</span>"+(n.icon_new?'<em class="icon-new">N</em>':"")+(n.icon_external?'<em class="icon-external">popup</em>':"")+"</a></li>",n.download&&(s='<div class="ncc-gamestart"><div class="ncc-gamestart-btn"><a href="'+n.href+'" class="btn-download ncc-gamestart-btn__start">'+n.desc+"</a></div></div>")}),a+="</ul>",n+='<li class="ncc-lnb-item m'+i.id+'"><a href="'+i.href+'"><span>'+i.desc+"</span>"+(i.icon_new?'<em class="icon-new">N</em>':"")+(i.icon_external?'<em class="icon-external">popup</em>':"")+"</a>"+a+"</li>"}),c+=n,c+='</ul><span class="ncc-lnb-hover" style="transform: translateX(50px) scaleX(0.1); opacity: 0;"></span></nav>',$(".ncc-lnb-wrap").html(s+c),"ingame"!==device&&"launcher"!==device&&($(".ncc-gnb-wrap").prepend('<div class="ncc-gnb-wrap__bg"></div><a class="ncc-ncservice-btn">Open<span><i></i><i></i><i></i></span></a><a class="ncc-bi" data-type="image" href="/" target="_self"><span>리니지</span></a>'),$(".ncc-left-panel .ncc-lnb-list").html(n),$(".ncc-left-panel .ncc-ncservice .ncc-ncservice-item-plaync a > span").text(serverName))}function createLoginHtml(){let c="";account?(c=account.firstChar?'<div class="ncc-login--after"><div class="ncc-login--mobile"><button class="ncc-login--mobile-btn"><img src="'+account.firstChar.profileUrl+'" class="ncc-login--info__thumb"></button><span class="ncc-login--info__noti"></span></div><div class="ncc-login--info"><a><img src="'+account.firstChar.profileUrl+'" class="ncc-login--info__thumb"><span class="ncc-login--info__char">'+account.firstChar.name+'</span><span class="ncc-login--info__server">'+serverName+", "+account.firstChar.level+"Lv</span></a></div></div>":'<div class="ncc-login--after"><div class="ncc-login--mobile"><button class="ncc-login--mobile-btn"><img src="/img/user_unkown.jpg" class="ncc-login--info__thumb"></button><span class="ncc-login--info__noti"></span></div><div class="ncc-login--info"><a><img src="/img/user_unkown.jpg" class="ncc-login--info__thumb"><span class="ncc-login--info__char">미설정</span><span class="ncc-login--info__server">'+serverName+", 0Lv</span></a></div></div>",createRightPanel()):c='<div class="ncc-login--before"><a href="javascript:login();" class="ncc-login__link ncc-login__link-login">로그인</a><a class="ncc-login__link ncc-login__link-join">'+serverName+"</a></div>",$("#nc-cnb .is-child-nav .ncc-login").html(c)}function createRightPanel(){var c="",n=account.alimList&&account.alimList.length,s=account.firstChar;n?$.each(account.alimList,function(n,s){c+='<li class="on" id="alim_'+s.id+'"><div class="wrapNotice"><a><p class="noticeMsg">'+s.logContent+"&nbsp;-&nbsp;"+moment(new Date(s.insertTime)).format("YYYY-MM-DD")+'</p><a href="javascript:alimDelete('+s.id+');" title="삭제">삭제</a><div class="thumb"><img class="icon" src="/img/'+("NSHOP_BUY"==s.type?30005:"COUPON_USE"==s.type?30001:"NCOIN_GIFT"==s.type?30002:"CASH_CHARGE"==s.type?27011:27009)+'.png" alt="nickname"></div></a></div></li>'}):c='<li class="on"><div class="wrapNotice"><a href="javascript:;"><p class="noticeMsg">알림이 없습니다.</p><div class="thumb"><img class="icon" src="/img/27009.png" alt="nickname"></div></a></div></li>';var i='<div class="ncc-userinfo" style="background-image: url(\''+(s?account.firstChar.profileUrl:"/img/user_unkown.jpg")+'\');"><a class="ncc-right-panel-close">Close</a><div class="ncc-profile is-nc-account"><div class="ncc-profile-wrap"><a class="ncc-profile-img ic-home" href="/account/mypage" target="_self"><img src="'+(s?account.firstChar.profileUrl:"/img/user_unkown.jpg")+'"></a><div class="ncc-profile-info"><span class="ncc-profile-info__char">'+(s&&0!=account.objId?account.firstChar.name:"대표 케릭터 미설정")+'</span><span class="ncc-profile-info__server">'+serverName+'</span><span class="ncc-profile-info__level">'+(s?account.firstChar.level:0)+'Lv</span></div><div class="ncc-profile-links"><a class="ncc-profile-charchange">캐릭터 변경</a><a class="ncc-profile-logout" href="javascript:logout();">로그아웃</a></div></div><div class="nc-account-info"><p>'+account.name+'</p></div></div><nav class="ncc-shortcut"><strong class="blind">서비스 바로가기</strong><ul id="ncc-shortcut-list" class="ncc-shortcut-list ncc-shortcut-list-length4"><li class="ncc-shortcut-item"><a href="/account/mypage" class="ncc-shortcut-item__link"><i class="icon-shortcut icon-shortcut--mypage"></i><span class="desc" id="ncc-shortcut-databind-mypage">마이페이지</span></a></li><li class="ncc-shortcut-item"><a href="/goods" class="ncc-shortcut-item__link"><i class="icon-shortcut icon-shortcut--ncoin"></i><span class="desc" id="ncc-shortcut-databind-ncoin">'+commaAdd(account.ncoin)+'</span></a></li><li class="ncc-shortcut-item"><a href="javascript:openCouponPopup();" class="ncc-shortcut-item__link"><i class="icon-shortcut icon-shortcut--entercoupon"></i><span class="desc" id="ncc-shortcut-databind-entercoupon">쿠폰등록</span></a></li><li class="ncc-shortcut-item"><a href="/customer" class="ncc-shortcut-item__link"><i class="icon-shortcut icon-shortcut--cs"></i><span class="desc" id="ncc-shortcut-databind-cs">문의내역</span></a></li></ul></nav></div><div class="ncc-noti-wrap"><ul class="ncc-noti-tab"><li class="is-active"><a onClick="return false;">알림 <span class="is-on" style="background-color: #dc4141; '+(n?"":"display: none;")+'">'+(n?account.alimList.length:0)+'</span></a></li><li><a>접속친구</a></li></ul><div class="ncc-noti"><div class="ncc-noti-list" id="notiList"><div class="wrap_btns"><button class="imgBtn btnSetting">알림설정</button></div><ul>'+c+'</ul></div><div class="ncc-noti-setting" id="notiSetting" style="display: none;"><header class="setAll"><input type="checkbox" id="-1" '+(account.alimReceive?"checked":"")+'><label for="-1">알림받기</label><p class="desc">서버에서 보내는 알림을 받습니다.</p></header><div class="wrap_btns"><button class="imgBtn btnApply">확인</button>&nbsp;<button class="imgBtn btnCancel">취소</button></div></div></div></div>';if($(".ncc-right-panel > .ncc-right-panel-wrap").html(i),account.charList.length){var a="";$.each(account.charList,function(c,n){a+="<li><span>"+n.name+'</span><input type="hidden" name="select_charter_choice" id="select_charter_choice" value="'+n.objId+'"/></li>'}),$(".ncc-character-panel .ncc-character-list-wrap .ncc-character-list").html(a)}}function createFooterHtml(){let c='<div class="footer footer-kr"><div class="footer-links"><ul class="footer-links-list footer-links-list-kr"><li class="footer-links-items item1">'+serverName+'</li></ul></div><div class="footer-copyright"><div class="copyright-studio">Lineage \xae is a registered trademark of '+serverName+' Corporation.</div><div class="copyright-company">Copyright \xa9 '+serverName+' Corporation. <br> <span class="reserved">All Rights Reserved.</span></div></div><div class="footer-logo">'+serverName+"</div></div>";$(".wrap-footer").html(c)}function initIncludeHTML(c,n){let s=new XMLHttpRequest;s.onreadystatechange=function(){4==this.readyState&&(200==this.status&&(c.innerHTML=this.responseText,"/cnb.html"==n&&(createCnbHtml(),"ingame"!==device&&createLoginHtml(),includeJS("/js/common.min.js?"+cacheVersion))),404==this.status&&(c.innerHTML="Page not found."))},s.open("GET",n,!0),s.send()}function showError(c,n,s){var i='<link rel="stylesheet" href="/css/error.css"><div class="error-container" id="container"><div class="logo"><a class="logo-link" href="/"><img src="/img/plaync.png" alt="plaync icon"/></a></div><div class="error-contents-wrap"><header class="error-header"><h1 class="title">일시적으로 페이지를 불러올 수 없습니다.</h1><p class="subcopy">동일한 문제가 지속적으로 발생할 경우, 고객지원으로 문의해 주시기 바랍니다.</p></header><div class="error-contents"><div class="error-btn-wrap"><button class="btn btn-error btn-error--o btn-back" onclick="history.go(-1);">이전 페이지</button><a href="/customer" class="btn btn-error btn-inquiry">고객지원</a></div><div class="links"><a href="/"><span>홈</span></a></div></div></div><footer id="footer" class="error-footer-wrap"><p class="copyright">Ⓒ '+serverName+" Corporation. All Rights Reserved.</p></footer></div>";throw $("body").html(i),Error("init setting from init.js Error")}mobiles.test(uAgent)&&(device="mobile"),"mobile"!==device&&(device=-1!==uAgent.indexOf("nc ingame")?"ingame":-1!==uAgent.indexOf("nc launcher")?"launcher":"pc"),"ingame"!==device||account||(location.href="/login_ingame"),document.addEventListener("contextmenu",c=>c.preventDefault()),$("body").addClass(device),initIncludeHTML(document.querySelector("#nc-cnb"),"/cnb.html"),initIncludeHTML(document.querySelector("#layer_alert"),"/popup.html?"+cacheVersion),createFooterHtml(),includeJS("/js/message.min.js?"+cacheVersion);