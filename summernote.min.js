/*!
 * project : summernote
 * author : LINOFFICE
 * 썸머노트 에디터 설정
 */ var editor=$("#summernote");function emoticon_layer_close(){let e=$("#emoticonLayer1");return e.hasClass("active")&&($(".dimmed").css("display","none"),$("body").css("overflow",""),e.removeClass("active")),!1}function add_emoticon(e){let t=$(e).children("img").attr("src");editor.summernote("pasteHTML",'<img src="'+t+'" width="140" height="140" alt="">'),emoticon_layer_close()}function append_emoticon(){let e=emoticons.map((e,t)=>'<li class="emoticon-items" onClick="add_emoticon(this);"><img src="'+e+'" class="fe-emoticon" data-emoticon="true" alt=""></li>').join("");$(".note-editor.note-frame.panel.panel-default").append('<div id="emoticonLayer1" aria-hidden="false" tabindex="-1" role="dialog" aria-label="이모티콘" class="editor-layer-emoticon"><div class="editor-layer-header"><h2 class="editor-layer-title">이모티콘</h2><button type="button" class="fe-btn fe-btn-close" onClick="emoticon_layer_close();"><i class="editor-icon-close"></i></button></div><div class="editor-layer-body"><div class="emoticon-wrap"><ul class="emoticon-list">'+e+"</ul></div></div></div>")}function uploadFile(e,t){let i=$("#dividPath").val();for(var o=0;o<e.length;o++){if(e[o].size>=1048576){alert("이미지는 1MB이하로 등록하십시오.");return}!function(o){var a=new FormData;a.append("uploadFile",e[o]),a.append("dividPath",i),$.ajax({data:a,type:"POST",url:"/define/editor/upload",contentType:!1,processData:!1,cache:!1,success:function(e){if(e){e=e.replaceAll("\\","/"),$(t).summernote("editor.insertImage",e);let i=$("#mainImg").val();i&&!i.length&&$("#mainImg").val(e);let o=$("#oriList").val();o&&$("#oriList").val(o?o+","+e:e)}else alert("이미지는 1MB이하로 등록하십시오.")}})}(o)}}function deleteFile(e){e=decodeString(e),$.ajax({data:{src:e},type:"POST",url:"/define/editor/delete",cache:!1,success:function(t){if(t){let i=e.substring(e.indexOf(location.host)+location.host.length);$("#mainImg").val()&&$("#mainImg").val()===i&&$("#mainImg").val("");var o=$("#tempList").val();$("#tempList").val(o?o+","+i:i);let a=$("#oriList").val();a&&$("#oriList").val(a.replace(i,""))}}})}function decodeString(e){return decodeURIComponent(decodeURI(e))}editor.summernote({height:500,minHeight:null,maxHeight:null,focus:!1,lang:"ko-KR",placeholder:"내용",tabDisable:!0,toolbar:[["style",["style"]],["fontstyle",["bold","underline","color"]],["paragraph",["paragraph","height","ul","ol"]],["insert",["link","table","picture","video"]],["custom",["emoticon"]]],buttons:{emoticon(){let e=$.summernote.ui;return e.button({contents:'<i class="xi-emoticon-smiley-o">',tooltip:"이모티콘",click:function(){let e=$("#emoticonLayer1");e.hasClass("active")||($(".dimmed").css("display","block"),$("body").css("overflow","hidden"),$("#emoticonLayer1").addClass("active"))}}).render()}},callbacks:{onImageUpload:function(e,t,i){uploadFile(e,this)},onMediaDelete:function(e){deleteFile(e[0].src)}}}),$("body").mouseup(function(e){var t=$("#emoticonLayer1");!t.has(e.target).length&&t.hasClass("active")&&($(".dimmed").css("display","none"),$("body").css("overflow",""),t.removeClass("active")),eventStop(e)}),append_emoticon();