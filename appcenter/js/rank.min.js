/*!
 * project : rank
 * author : LINOFFICE
 * 랭킹
 */ $(function(){var a=$(window).width(),s={charType:"all"},e=function(a){$(".pagination").pagination({dataSource:function(s){$.ajax({type:"POST",url:"/define/rank",data:a,success:function(a){s(a)}})},pageSize:20,showPrevious:!1,showNext:!1,showPageNumbers:!0,callback:function(s,e){var i="";$(".nodata").remove(),s.length?($.each(s,function(s,e){var l=e.curRank-e.oldRank;i+='<tr><td class="rank"><span class="num">'+e.curRank+'</span><span class="ui-rank '+(l>0?"up":l<0?"down":"")+'">'+(0==l?"-":l)+"</span></td><td>"+e.name+"</td><td>"+n[e.classId]+'</td><td class="grade"><span class="star '+t("all"===a.charType?e.curRank:e.subCurRank)+'"></span></td></tr>'}),$(".table-list").css("display","block")):($(".table-list").css("display","none"),$(".section-ranking-list").append('<div class="nodata"><p>랭킹 정보가 존재하지 않습니다.</p></div>')),$(".table-ranking-area").html(i)}})};let n=["군주","기사","요정","마법사","다크엘프","용기사","환술사","전사","검사","창기사","성기사"];var t=function(a){return 1==a?"top1":2==a?"top2":3==a?"top3":a>=4&&a<=10?"grade4":a>=11&&a<=20?"grade3":a>=21&&a<=60?"grade2":a>=61&&a<=80?"grade1":"grade0"},i=$(".ui-select-tab.select-tab-class");$(window).resize(function(){var s=window.outerWidth;a=s,s<=960?i.find(".select").hasClass("open")&&(i.find(".select").removeClass("open"),i.find(".select-tab.option").css("display","none")):i.find(".select").hasClass("open")||(i.find(".select").addClass("open"),i.find(".select-tab.option").css("display","block"))});var l=$(".select-tab.option > li > a");l.on("click",function(n){var t=$(this).attr("data-type");if(s.charType===t){a<=960&&i.find(".select").hasClass("open")&&c(),eventStop(n);return}l.removeClass("selected"),$(this).addClass("selected"),s.charType=t,$("#rankingtop").html("all"===t?rank_total_range:rank_class_range),i.find(".select").html($(this).html()),$(".pagination").destory,e(s),a<=960&&i.find(".select").hasClass("open")&&c(),eventStop(n)}),i.find(".select").on("click",function(){$(this).hasClass("open")?c():o()});var o=function(){i.find(".select").addClass("open"),i.find(".select-tab.option").css("display","block")},c=function(){i.find(".select").removeClass("open"),i.find(".select-tab.option").css("display","none")};$("body").mouseup(function(s){!(a<=960)||i.has(s.target).length||l.has(s.target).length||c(),eventStop(s)}),$(".section-ranking-mycharacter .detail-info").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1}),$(document).ready(function(){a<=960?c():o(),e(s)})});
