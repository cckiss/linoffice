/*!
 * project : gift
 * author : LINOFFICE
 * N코인 선물하기
 */ account&&account.ingame||window.self.close();let gift_sync=!1;function ncoin_input(s){inputCheckNumber(s),input_box_enable(s)}function friend_input(s){input_box_enable(s)}function input_box_enable(s){var n=$(s).parent(".input_box");$(s).val().length?n.hasClass("on")||n.addClass("on"):n.hasClass("on")&&n.removeClass("on")}function ncoin_error_msg(s){$(".ncoin_msg").text(s),$(".ncoin_msg").css("display","block")}function friend_error_msg(s){$(".friend_msg").text(s),$(".friend_msg").css("display","block")}function finish_gift(){popupClose(),window.opener.location.reload(),window.self.close()}function send_gift_excute(s,n){!gift_sync&&(gift_sync=!0,$(".ncoin_msg").css("display","none"),$(".friend_msg").css("display","none"),getDatasWithOption([{type:"POST",url:"/define/gift",dataType:"json",contentType:"application/json",Accept:"application/json",data:{ncoin_amount:s,friend_name:n}}],s=>{switch(s){case 1:popupShow("정상적으로 처리되었습니다.",'<span class="type2"><a href="javascript:finish_gift();" class="close">닫기</a></span>',null);break;case 2:popupShow("인게임에서 이용할 수 있습니다.",'<span class="type2"><a href="javascript:popupClose();" class="close">닫기</a></span>',null);break;case 3:popupShow("계정 정보를 찾을 수 없습니다.",'<span class="type2"><a href="javascript:popupClose();" class="close">닫기</a></span>',null);break;case 4:popupShow("대표 캐릭터를 찾을 수 없습니다.",'<span class="type2"><a href="javascript:popupClose();" class="close">닫기</a></span>',null);break;case 5:popupShow("인게임 내 케릭터를 찾을 수 없습니다.",'<span class="type2"><a href="javascript:popupClose();" class="close">닫기</a></span>',null);break;case 6:popupShow("보유하신 N코인이 부족합니다.",'<span class="type2"><a href="javascript:popupClose();" class="close">닫기</a></span>',null);break;case 7:popupShow("선물 대상을 찾을 수 없습니다.",'<span class="type2"><a href="javascript:popupClose();" class="close">닫기</a></span>',null);break;case 8:popupShow("자기 자신에게는 선물할 수 없습니다.",'<span class="type2"><a href="javascript:popupClose();" class="close">닫기</a></span>',null);break;default:popupShow("선물에 실패하였습니다.",'<span class="type2"><a href="javascript:popupClose();" class="close">닫기</a></span>',null)}gift_sync=!1},s=>{throw gift_sync=!1,Error("send_gift_excute from gift.js Error")}))}function send_gift_confirm(){if(!account.ncoin){ncoin_error_msg("보유중인 N코인이 없습니다.");return}let s=$("#ncoinAmount");if(!s.val()){ncoin_error_msg("선물하실 금액을 입력해주세요.");return}let n=Number(commaRemove(s.val()));if(n>account.ncoin){ncoin_error_msg("보유중인 N코인이 부족합니다.");return}if(n<1e4){ncoin_error_msg("10,000코인 이상 선물이 가능합니다.");return}let e=$("#friendName");if(!e.val()){friend_error_msg("선물하실 캐릭터명을 입력해주세요.");return}let a=$("#friendName").val();if(a.length>20){friend_error_msg("캐릭터명이 올바르지 않습니다.");return}if(a.match(/\s/g)){friend_error_msg("캐릭터명에는 공백이 들어갈 수 없습니다.");return}if(!/^[가-힣|a-z|A-Z|0-9|]+$/.test(a)){friend_error_msg("캐릭터명이 올바르지 않습니다.");return}if(account.firstChar&&account.firstChar.name==a){friend_error_msg("자기자신에게는 선물할 수 없습니다.");return}popupShow("정말로 선물하시겠습니까?",`<span class="type2"><a href="javascript:send_gift_excute(${n}, '${a}');" class="close">예</a></span>`,`<span class="type1"><a href="javascript:popupClose();" class="close">아니오</a></span>`)}$(function(){$("#userNcoin").text(commaAdd(account.ncoin)),$(".scrollbar-macosx").scrollbar()}),$(".chargeAmt-reset").on("click",function(s){var n=$(this).parent(".input_box");n.removeClass("on"),n.children("input").val("");let e=n.parent(".present_amount").children(".error_msg");e.text(""),e.css("display","none")});
