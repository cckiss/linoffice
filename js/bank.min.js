/*!
 * project : bank
 * author : LINOFFICE
 * 계좌 등록
 */ let bank_singleton=null,bank_singletonEnforcer="singletonEnforcer";class Bank{constructor(n){if(n!==bank_singletonEnforcer)throw"Cannot--construct singleton";this.init()}static get instance(){return bank_singleton||(bank_singleton=new Bank(bank_singletonEnforcer)),bank_singleton}init(){let n=this;includeHTML(document.querySelector("#svg-container"),"https://cdn.jsdelivr.net/gh/cckiss/web/svg.html",cacheVersion),n.param={bank_name:void 0,bank_number:void 0,owner_name:void 0,phone:void 0},n.regist_lock=!1,n.init_progress()}init_progress(){let n=this,e=`<section class="init_section"><div class="message_area"><h1>계좌 등록 안내</h1><ul>${regist_message}</ul></div><div class="btn_wrap"><button type="button" class="btn"><span>다음</span></button></div></section>`;$(".regist_container").html(e),$(".init_section .btn_wrap .btn").addEventListener("click",e=>{n.setting_progress()})}setting_progress(){let n=this;n.param.bank_name=n.param.bank_number=n.param.owner_name=n.param.phone=void 0,$(".regist_container").html('<section class="setting_section"><div class="message_area"><p>계좌를 설정하십시오.</p></div><div class="input_area"><div class="input_box"><label>은행명</label><input type="text" autocomplete="off" placeholder="은행명을 입력해주세요" id="reg_bank_name" maxlength="10"></div><div class="input_box"><label>계좌번호</label><input type="text" autocomplete="off" placeholder="계좌번호를 입력해주세요" id="reg_bank_number" maxlength="20"></div><div class="input_box"><label>계좌주</label><input type="text" autocomplete="off" placeholder="계좌주를 입력해주세요" id="reg_owner_name" maxlength="10"></div><div class="input_box"><label>연락처</label><input type="text" autocomplete="off" placeholder="연락처를 입력해주세요" id="reg_phone" maxlength="13" onKeyup="OnCheckPhone(this);"></div></div><div class="btn_wrap"><button type="button" class="btn left"><span>이전</span></button><button type="button" class="btn right"><span>다음</span></button></div></section>'),bank&&($("#reg_bank_name").val(bank.bank_name),$("#reg_bank_number").val(bank.bank_number),$("#reg_owner_name").val(bank.owner_name),$("#reg_phone").val(bank.phone)),$(".setting_section .btn_wrap .btn.left").addEventListener("click",e=>{n.init_progress()}),$(".setting_section .btn_wrap .btn.right").addEventListener("click",e=>{n.finish_progress()})}finish_progress(){let n=$("#reg_bank_name").val();if(!n){ncuim_modal_show("은행명이 설정되지 않았습니다.");return}let e=$("#reg_bank_number").val();if(!e){ncuim_modal_show("계좌번호가 설정되지 않았습니다.");return}let t=$("#reg_owner_name").val();if(!t){ncuim_modal_show("계좌주가 설정되지 않았습니다.");return}let a=$("#reg_phone").val();if(!a||13!=a.length){ncuim_modal_show("연락처가 설정되지 않았습니다.");return}if(bank&&n==bank.bank_name&&e==bank.bank_number&&t==bank.owner_name&&a==bank.phone){ncuim_modal_show("변경된 데이터가 없습니다.");return}_.param.bank_name=n,_.param.bank_number=e,_.param.owner_name=t,_.param.phone=a;let s=`<section class="finish_section"><div class="message_area"><p>${bank?`정보를 확인 후 변경 버튼을 눌러주세요.`:`정보를 확인 후 등록 버튼을 눌러주세요.`}</p></div><div class="finish_area"><div class="seller_bank txt">은행: <span>${_.param.bank_name}</span></div><div class="seller_bank_number txt">계좌번호: <span>${_.param.bank_number}</span></div><div class="seller_banker txt">계좌주: <span>${_.param.owner_name}</span></div><div class="seller_phone txt">연락처: <span>${_.param.phone}</span></div></div><div class="btn_wrap"><button type="button" class="btn left"><span>이전</span></button><button type="button" class="btn right"><span>${bank?`변경`:`등록`}</span></button></div></section>`;$(".regist_container").html(s),$(".finish_section .btn_wrap .btn.left").addEventListener("click",n=>{_.setting_progress()}),$(".finish_section .btn_wrap .btn.right").addEventListener("click",n=>{_.regist()})}regist(){!_.regist_lock&&(_.regist_lock=!0,getDatasWithOption([{type:"POST",url:"/define/bank/regist",dataType:"json",contentType:"application/json",Accept:"application/json",data:_.param}],n=>{switch(n){case 1:ncuim_modal_show(bank?"정상적으로 변경되었습니다.":"정상적으로 등록되었습니다.","window.opener.location.reload();window.self.close();");break;case 2:ncuim_modal_show("계정을 찾을 수 없습니다.");break;default:ncuim_modal_show(bank?"변경에 실패하였습니다.":"등록에 실패하였습니다.")}_.regist_lock=!1},n=>{_.regist_lock=!1}))}}Bank.instance;
