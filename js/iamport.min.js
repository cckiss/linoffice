/*!
 * project : iamport
 * author : LINOFFICE
 * N코인 결재
 */ function finish_charge(){popupClose(),window.opener.location.reload(),window.self.close()}document.addEventListener("contextmenu",a=>a.preventDefault()),$(function(){let a=window.IMP;a.init(iamportApiCode),a.request_pay({pg:"kakaopay",pay_method:"card",merchant_uid:"merchant_"+getTime,name:"N코인 "+chargeAmount+"포인트 결재",amount:chargeAmount,buyer_name:account.firstChar.name,buyer_email:"123456@naver.com",buyer_tel:"010-1234-5678",buyer_addr:"서울시 삼성동",buyer_postcode:"123-456"},function(a){a.success?jQuery.ajax({url:"/define/charge",type:"POST",dataType:"json",data:{imp_uid:a.imp_uid,merchant_uid:a.merchant_uid,card_auth_id:a.apply_num,charge_amount:a.paid_amount}}).done(function(a){switch(a){case 1:popupShow("정상적으로 결재가 완료되었습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 2:popupShow("계정을 찾을 수 없습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 3:popupShow("대표 캐릭터를 찾을 수 없습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 4:popupShow("월드 내 캐릭터가 존재하지 않습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 5:popupShow("결재 시스템이 사용중이지 않습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 6:popupShow("요청한 결재 금액이 일치하지 않습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;case 0:popupShow("인게임에서 결재하실 수 있습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null);break;default:popupShow("결재에 실패하였습니다.",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null)}}).fail(function(){popupShow("결재 검증에 실패하였습니다.\r\nREGIST_FAILURE",'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null)}):popupShow("결재에 실패하였습니다.\r\nMESSAGE : "+a.error_msg,'<span class="type2"><a href="javascript:finish_charge();" class="close">닫기</a></span>',null)})});
