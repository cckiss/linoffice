/*!
 * project : rank
 * author : LINOFFICE
 * 랭킹
 */ $(function(){var a=$(window).width(),s={charType:"all"},e=function(a){$(".data-loader").css("display","block");$(".pagination").pagination({dataSource:function(s){getDatasWithOption([{type:"POST",url:"/define/rank",dataType:"json",contentType:"application/json",Accept:"application/json",data:a}],a=>{s(a)},a=>{})},pageSize:20,showPrevious:!1,showNext:!1,showPageNumbers:!0,callback:function(s,e){var l="";$(".nodata").remove(),s.length?($.each(s,function(s,e){var i=e.curRank-e.oldRank;l+=`<tr><td class="rank"><span class="num">${e.curRank}</span><span class="ui-rank ${i>0?"up":i<0?"down":""}">${0==i?"-":i}</span></td><td>${e.name}</td><td>${n[e.classId]}</td><td class="grade"><span class="star ${t("all"===a.charType?e.curRank:e.subCurRank)}"></span></td></tr>`}),$(".table-list").css("display","block")):($(".table-list").css("display","none"),$(".section-ranking-list").append(`<div class="nodata"><p>랭킹 정보가 존재하지 않습니다.</p></div>`)),$(".table-ranking-area").html(l),$(".data-loader").css("display","none")}})};let n=["군주","기사","요정","마법사","다크엘프","용기사","환술사","전사","검사","창기사","성기사"];var t=function(a){return 1==a?"top1":2==a?"top2":3==a?"top3":a>=4&&a<=10?"grade4":a>=11&&a<=20?"grade3":a>=21&&a<=60?"grade2":a>=61&&a<=80?"grade1":"grade0"},l=$(".ui-select-tab.select-tab-class");$(window).resize(function(){var s=window.outerWidth;a=s,s<=960?l.find(".select").hasClass("open")&&(l.find(".select").removeClass("open"),l.find(".select-tab.option").css("display","none")):l.find(".select").hasClass("open")||(l.find(".select").addClass("open"),l.find(".select-tab.option").css("display","block"))});var i=$(".select-tab.option > li > a");i.on("click",function(n){var t=$(this).attr("data-type");if(s.charType===t){a<=960&&l.find(".select").hasClass("open")&&c(),eventStop(n);return}i.removeClass("selected"),$(this).addClass("selected"),s.charType=t,$("#rankingtop").html("all"===t?rank_total_range:rank_class_range),l.find(".select").html($(this).html()),$(".pagination").destory,e(s),a<=960&&l.find(".select").hasClass("open")&&c(),eventStop(n)}),l.find(".select").on("click",function(){$(this).hasClass("open")?c():o()});var o=function(){l.find(".select").addClass("open"),l.find(".select-tab.option").css("display","block")},c=function(){l.find(".select").removeClass("open"),l.find(".select-tab.option").css("display","none")};$("body").mouseup(function(s){!(a<=960)||l.has(s.target).length||i.has(s.target).length||c(),eventStop(s)}),$(".section-ranking-mycharacter .detail-info").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1}),a<=960?c():o(),e(s)});
