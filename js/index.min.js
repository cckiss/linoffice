/*!
 * project : index
 * author : LINOFFICE
 * 인덱스 페이지 화면 구성
 */ $(function(){var t=function(t){let o=account&&account.gm,e="",i="",a="";$.each(t,function(t,s){e+='<li data-title="'+s.title+'" data-content="'+s.subText+'" data-date="'+s.promotionDate+'" data-link="'+s.targetLink+'" data-img="'+s.promotionImg+'" data-subimg="'+s.listallImg+'"><div class="bg-mobile" data-lazy="'+s.promotionImg+'"></div><div class="bg" data-lazy="'+s.promotionImg+'"></div><div class="article"><a href="'+s.targetLink+'" class="outlink"><span class="type"></span><strong class="title">'+s.title+'</strong><span class="desc">'+s.subText+'</span><span class="date">'+s.promotionDate+"</span></a></div>"+(o?'<div class="promotion_admin_util"><button onClick="promotionModify('+s.id+', this);">수정</button><button onClick="promotionDelete('+s.id+');">삭제</button><button onClick="promotionInsert();">추가</button></div>':"")+"</li>",i+='<li><a href="#">'+s.title+"</a></li>",a+='<li><a href="'+s.targetLink+'"><img src="'+s.listallImg+'" class="thumb"><div class="article"><strong class="subject">'+s.title+'</strong><span class="date">'+s.subText+"</span></div></a></li>"}),$(".section-promotion").html('<div class="section-promotion__list banner-wrap"><ul>'+e+'</ul></div><div class="pagination-wrap"><div class="page-no"><span class="current">0</span><span class="divider" style="padding: 0 4px;">/</span><span class="total">0</span></div><button type="button" class="btn-prev-mobile" style="z-index: 10;">prev</button><button type="button" class="btn-next-mobile" style="z-index: 10;">next</button><div class="pagination-mobile"><div class="handle"><ul class="btns">'+i+'</ul></div></div><div class="pagination-pc"><ul class="btns">'+i+'</ul><button type="button" class="btn-prev" style="z-index: 1;">prev</button><button type="button" class="btn-next" style="z-index: 1;">next</button></div></div><div class="section-promotion__listall"><div class="bundle"><button class="btn-listall"></button><div class="wrap-listall"><ul>'+a+"</ul></div></div></div>")},o=function(t,o){var e="";switch(t){case"NOTICE":if(o.length){var i=moment().format("YYYYMMDD");let a="",s="<ul>";$.each(o,function(t,o){if(0==t)a="<a href=\"javascript:urlTypeform('0', '"+o.rownum+"', 'post', '/notice/view');\"><dl><dd class=\"thumb\" style=\"background-image:url('"+(o.mainImg?o.mainImg:"https://cdn.jsdelivr.net/gh/cckiss/web/img/mainContent/notice.jpg")+"');\"><dt>"+o.title+"</dt></dl></a>";else{var e=i-moment(new Date(o.date)).format("YYYYMMDD");s+='<li class="'+(0==e?"is-new-true":"is-new-false")+"\"><a href=\"javascript:urlTypeform('0', '"+o.rownum+"', 'post', '/notice/view');\">"+o.title+"</a>"+(0==e?'<span class="icon-new"></span>':"")+"</li>"}}),e=a+s+"</ul>"}else e='<div class="mainContent_empty"><p>등록된 글이 없습니다.</p></div>';$(".section-notice > article").html(e);break;case"UPDATE":e=o.length?"<a href=\"javascript:urlTypeform('1', '"+o[0].rownum+"', 'post', '/update/view');\"><dl><dd class=\"thumb\" style=\"background-image:url('"+(o[0].mainImg?o[0].mainImg:"https://cdn.jsdelivr.net/gh/cckiss/web/img/mainContent/update.jpg")+"');\"></dd><dt>"+o[0].title+'</dt><dd class="desc" style="max-height: 24px; overflow: hidden;">'+o[0].content+"</dd></dl></a>":'<div class="mainContent_empty"><p>등록된 글이 없습니다.</p></div>',$(".section-update > article").html(e);break;default:e=o.length?"<a href=\"javascript:urlTypeform('2', '"+o[0].rownum+"', 'post', '/event/view');\"><dl><dd class=\"thumb\" style=\"background-image:url('"+(o[0].mainImg?o[0].mainImg:"https://cdn.jsdelivr.net/gh/cckiss/web/img/mainContent/event.jpg")+"');\"></dd><dt>"+o[0].title+'</dt><dd class="desc" style="max-height: 24px; overflow: hidden;">'+o[0].content+"</dd></dl></a>":'<div class="mainContent_empty"><p>등록된 글이 없습니다.</p></div>',$(".section-event > article").html(e)}},e=function(t){let o=t.map((t,o)=>"<li>"+("-"==t[0]?'<a href="javascript:;">':'<a href="/search?query='+t[0]+'">')+t[0]+'</a><span class="ui-rank '+t[1]+'">'+t[2]+"</span></li>").join("");$(".section-hotissue .keyword").html(o)},i=function(t){let o=t.map((t,o)=>'<div class="slick-item"><a href="/powerbook/search?searchType=4&query='+t.name+'"><dl><dd class="thumb"><span class="flag 파워북">파워북</span><img src="'+t.info.mainImg+'" class="thumb"></dd><dt><strong>파워북</strong></dt><dd class="desc">'+t.name+"</dd></dl></a></div>").join("");$("#lineageworld").html(o)},a=function(t){var o="";t.length?$.each(t,function(t,e){o+='<div class="slick-item"><a href="javascript:urlform(\''+e.rownum+"', 'post', '/board/view');\"><dl><dd class=\"thumb\" style=\"background-image:url('"+(e.mainImg?e.mainImg:"https://cdn.jsdelivr.net/gh/cckiss/web/img/updateThum/server_00"+(t+1)+".jpg")+'\');"><span class="flag">'+e.name+"</span></dd><dt><strong>"+e.title+"</strong></dt></dl></a></div>"}):o='<div class="mainContent_empty"><p>등록된 글이 없습니다.</p></div>',$("#board_user").html(o)},s=function(t){var o="";t.length?$.each(t,function(t,e){o+='<div class="slick-item"><a href="javascript:urlform(\''+e.rownum+"', 'post', '/contents/view');\"><dl><dd class=\"thumb\" style=\"background-image:url('"+(e.mainImg?e.mainImg:"https://cdn.jsdelivr.net/gh/cckiss/web/img/eventThum/event_00"+(t+1)+".jpg")+'\');"><span class="flag">'+e.name+"</span></dd><dt><strong>"+e.title+"</strong></dt></dl></a></div>"}):o='<div class="mainContent_empty"><p>등록된 글이 없습니다.</p></div>',$("#content_user").html(o)},n=function(t){if(t.length){let o="";$.each(t,function(t,e){let i=e[0];o+='<section class="nshop__item"><a href="javascript:urlform(\''+i.id+'\', \'post\', \'/goods/view\');"><span class="flag flag-none"></span><dl><dd class="thumb"><img src="'+i.icon_image+'" alert="'+i.title+'"></dd><dt>'+i.title+'</dt><dd class="price">'+("NCOIN"===i.price_type?'<i class="price_ncoin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="#F16126" d="M18.965 12.51l-6.455 6.455a3.56 3.56 0 0 1-5.02 0L1.035 12.51a3.56 3.56 0 0 1 0-5.02L7.49 1.035a3.56 3.56 0 0 1 5.02 0l6.455 6.455a3.56 3.56 0 0 1 0 5.02"></path><path fill="#FFF" d="M12.5 6.989s-2.374-.279-2.809 0c0 0-1.02.471-1.02 1.957v2.108c-.018 1.486 1.02 1.957 1.02 1.957.435.279 2.809 0 2.809 0v1.829c-.877.277-2.68.26-2.68.26-3.038-.002-3.32-3.394-3.32-3.394V8.294S6.782 4.902 9.82 4.9c0 0 1.803-.017 2.68.261V6.99z"></path></svg></i>':'<i class="price_npoint"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="#F16126" d="M18.965 12.51l-6.455 6.455a3.56 3.56 0 0 1-5.02 0L1.035 12.51a3.56 3.56 0 0 1 0-5.02L7.49 1.035a3.56 3.56 0 0 1 5.02 0l6.455 6.455a3.56 3.56 0 0 1 0 5.02"></path><path fill="#FFF" d="M12.5 6.989s-2.374-.279-2.809 0c0 0-1.02.471-1.02 1.957v2.108c-.018 1.486 1.02 1.957 1.02 1.957.435.279 2.809 0 2.809 0v1.829c-.877.277-2.68.26-2.68.26-3.038-.002-3.32-3.394-3.32-3.394V8.294S6.782 4.902 9.82 4.9c0 0 1.803-.017 2.68.261V6.99z"></path></svg></i>')+"<strong>"+commaAdd(i.price)+"</strong></dd></dl></a></section>"}),$("#nshopRoll .slick-item").html(o)}else $("#nshopRoll .slick-item").html('<div class="mainContent_empty"><p>등록된 상품이 없습니다.</p></div>')};$.each(index_data,function(l,r){switch(l){case"PROMOTIONS":t(r);break;case"KEYWORD":e(r);break;case"GUIDE":i(r);break;case"COMMUNITY":a(r);break;case"CONTENT":s(r);break;case"GOODS":n(r);break;case"NOTICE":case"UPDATE":case"EVENT":o(l,r);break;case"MODAL":includeJS("https://cdn.jsdelivr.net/gh/cckiss/web/js/modal.min.js");break;case"TOAST":includeJS("https://cdn.jsdelivr.net/gh/cckiss/web/js/toast.min.js");break;default:console.log("UNDEFINED_INDEX_DATA_KEY : "+l)}}),$(".section-hotissue span.btn-toggle").on("click",function(){$(".section-hotissue").toggleClass("on")});let l=$("#FooterGradeLayer");$("body").mouseup(function(t){!l.has(t.target).length&&l.hasClass("is-show-footer")&&l.removeClass("is-show-footer")}),$("#grade-layer-item").on("click",function(t){l.hasClass("is-show-footer")?l.removeClass("is-show-footer"):l.addClass("is-show-footer")}),$("#lineageworld").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:6,slidesToScroll:6,responsive:[{breakpoint:960,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:2}}]}),$(".section-powerbookcartoon").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:640,settings:{slidesToShow:1,slidesToScroll:1}}]}),$("#nshopRoll").slick({dots:!0,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:640,settings:{slidesToShow:1,slidesToScroll:1}}]}),account&&account.ingame&&account.gm&&$(".section-etcservice").prepend('<a href="javascript:L1_FUNCTION();">함수 보기</a>')});const promoMax=16;function promoFileChange(t){$(t).closest(".filebox").find(".upload-name").val($(t).val())}function promotionUtilForm(t){$("#container").append('<div class="promotionUtilForm"><div class="promotionUtilForm_container"><form name="promoForm" onsubmit="return false;"><h1>프로모션</h1><input type="hidden" name="promoId" id="promoId" /><input type="hidden" name="dividPath" id="dividPath" value="PROMO_"/><div class="util_items"><label>제목</label><input type="text" name="promoTitle" id="promoTitle" placeholder="필수항목" /></div><div class="util_items"><label>내용</label><input type="text" name="promoContent" id="promoContent" placeholder="필수항목" /></div><div class="util_items"><label>날짜</label><input type="text" name="promoDate" id="promoDate" placeholder="생략가능" /></div><div class="util_items"><label>링크</label><input type="text" name="promoLink" id="promoLink" placeholder="필수항목(이동 경로)" /></div><div class="util_items filebox"><label>이미지</label><i><input class="upload-name" id="promoImgStr" name="promoImgStr" placeholder="필수항목(이미지 파일)" readonly><label class="file-label" for="promoImg">파일찾기</label><input type="file" name="promoImg" id="promoImg" class="file" onchange="promoFileChange(this);" ></i></div><div class="util_items filebox"><label>작은 이미지</label><i><input class="upload-name" id="promoSubImgStr" name="promoSubImgStr" placeholder="필수항목(이미지 파일)" readonly><label class="file-label" for="promoSubImg">파일찾기</label><input type="file" name="promoSubImg" id="promoSubImg" class="file" onchange="promoFileChange(this);" ></i></div>'+("update"==t?'<div class="btns"><button onClick="promotionCancel();return false;">취소</button><button onClick="promotionUpdate();return false;">수정</button></div>':'<div class="btns"><button onClick="promotionCancel();return false;">취소</button><button onClick="promotionAdd();return false;">추가</button></div>')+"</form></div></div>"),$("body").addClass("ncc-dimmed")}function promotionInsert(t,o){let e=$(".section-promotion__listall .wrap-listall > ul > li").length;if(e>=16){alert("프로모션은 최대 16개까지 등록할 수 있습니다.");return}promotionUtilForm("insert")}function promotionAdd(){var t=document.promoForm;if(!t.promoTitle.value||!t.promoContent.value||!t.promoLink.value||!t.promoImg.value||!t.promoSubImg.value){alert("필수항목을 입력하십시오.");return}if($("#promoImg").prop("files")[0].size>1048576||$("#promoSubImg").prop("files")[0].size>1048576){alert("이미지는 1MB이하로 등록하십시오.");return}var o=new FormData(t);$.ajax({data:o,type:"POST",url:"/define/promotion/insert",contentType:!1,processData:!1,cache:!1,timeout:6e5,success:function(t){t&&(location.href="/")},error:function(t,o,e){throw Error("promotionAdd from main.js Error")}})}function promotionModify(t,o){promotionUtilForm("update");let e=$(o).closest("li");$(".promotionUtilForm #promoId").val(t),$(".promotionUtilForm #promoTitle").val(e.attr("data-title")),$(".promotionUtilForm #promoContent").val(e.attr("data-content")),$(".promotionUtilForm #promoDate").val(e.attr("data-date")),$(".promotionUtilForm #promoLink").val(e.attr("data-link")),$(".promotionUtilForm #promoImg").closest(".filebox").find(".upload-name").val(e.attr("data-img")),$(".promotionUtilForm #promoSubImg").closest(".filebox").find(".upload-name").val(e.attr("data-subimg"))}function promotionUpdate(){var t=document.promoForm;if(!t.promoId.value||!t.promoTitle.value||!t.promoContent.value||!t.promoLink.value||!t.promoImgStr.value||!t.promoSubImgStr.value){alert("필수항목을 입력하십시오.");return}let o=$("#promoImg").prop("files")[0],e=$("#promoSubImg").prop("files")[0];if(o&&o.size>1048576||e&&e.size>1048576){alert("이미지는 1MB이하로 등록하십시오.");return}var i=new FormData(t);$.ajax({type:"POST",processData:!1,contentType:!1,cache:!1,url:"/define/promotion/update",data:i,timeout:6e5,success:function(t){t&&(location.href="/")},error:function(t,o,e){throw Error("promotionUpdate from main.js Error")}})}function promotionDelete(t){confirm("정말로 삭제 하시겠습니까?")&&$.ajax({type:"POST",datatype:"json",url:"/define/promotion/delete",data:{id:t},success:function(t){t&&(location.href="/")},error:function(t,o,e){throw Error("promotionDelete from main.js Error")}})}function promotionCancel(){$(".promotionUtilForm").remove(),$("body").removeClass("ncc-dimmed")}function L1_FUNCTION(){for(var t=Object.getOwnPropertyNames(L1),o='<div id="l1_functions" style="position: fixed; left: 35%; top: 10%; z-index: 111111111; padding: 10px; background: #000; color: #fff; max-height: 400px;overflow: auto;"><ul>',e=0;e<t.length;e++)o+="<li><strong>"+t[e]+"</strong></li>";o+='</ul><a href="javascript:$(\'#l1_functions\').remove();" style="margin: auto; display: table; padding: 10px; background: cadetblue; color: #fff; font-weight: 600;">닫기</a></div>',$("body").prepend(o)}
