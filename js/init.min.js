/*!
 * project : init
 * author : LINOFFICE
 * 디바이스 환경 및 최초 스크립트 설정
 */ let device;const uAgent=navigator.userAgent.toLowerCase(),mobiles=/iphone|ipod|ipad|android|blackberry|windows ce|nokia|webos|opera mini|sonyericsson|opera mobi|iemobile|aarch/;function createCnbHtml(){let e='<nav class="ncc-lnb ncc-lnb-type--main"><ul class="ncc-lnb-list">',t="",c="";$.each(cnb,function(e,n){var i='<ul class="ncc-lnb-item__sub">';$.each(n._subs,function(e,t){i+=`<li class="s${t.id}"><a href="${t.href}" target="_self"><span>${t.desc}</span>${t.icon_new?'<em class="icon-new">N</em>':""}${t.icon_external?'<em class="icon-external">popup</em>':""}</a></li>`,t.download&&(c=`<div class="ncc-gamestart"><div class="ncc-gamestart-btn"><a href="${t.href}" class="btn-download ncc-gamestart-btn__start">${t.desc}</a></div></div>`)}),i+="</ul>",t+=`<li class="ncc-lnb-item m${n.id}"><a href="${n.href}"><span>${n.desc}</span>${n.icon_new?'<em class="icon-new">N</em>':""}${n.icon_external?'<em class="icon-external">popup</em>':""}</a>${i}</li>`}),e+=t,e+='</ul><span class="ncc-lnb-hover" style="transform: translateX(50px) scaleX(0.1); opacity: 0;"></span></nav>',$(".ncc-lnb-wrap").html(`${c}${e}`),"ingame"!==device&&"launcher"!==device&&($(".ncc-gnb-wrap").prepend('<div class="ncc-gnb-wrap__bg"></div><a class="ncc-ncservice-btn">Open<span><i></i><i></i><i></i></span></a><a class="ncc-bi" data-type="image" href="/" target="_self"><span>리니지</span></a>'),$(".ncc-left-panel .ncc-lnb-list").html(t),$(".ncc-left-panel .ncc-ncservice .ncc-ncservice-item-plaync a > span").text(serverName))}function createLoginHtml(){let e="";account?(e=account.firstChar?`<div class="ncc-login--after"><div class="ncc-login--mobile"><button class="ncc-login--mobile-btn"><img src="https://cdn.jsdelivr.net/gh/cckiss/web${account.firstChar.profileUrl}" class="ncc-login--info__thumb"></button><span class="ncc-login--info__noti"></span></div><div class="ncc-login--info"><a><img src="https://cdn.jsdelivr.net/gh/cckiss/web${account.firstChar.profileUrl}" class="ncc-login--info__thumb"><span class="ncc-login--info__char">${account.firstChar.name}</span><span class="ncc-login--info__server">${serverName}, ${account.firstChar.level}Lv</span></a></div></div>`:`<div class="ncc-login--after"><div class="ncc-login--mobile"><button class="ncc-login--mobile-btn"><img src="https://cdn.jsdelivr.net/gh/cckiss/web/img/user_unkown.jpg" class="ncc-login--info__thumb"></button><span class="ncc-login--info__noti"></span></div><div class="ncc-login--info"><a><img src="https://cdn.jsdelivr.net/gh/cckiss/web/img/user_unkown.jpg" class="ncc-login--info__thumb"><span class="ncc-login--info__char">미설정</span><span class="ncc-login--info__server">${serverName}, 0Lv</span></a></div></div>`,createRightPanel()):e=`<div class="ncc-login--before"><a href="javascript:login();" class="ncc-login__link ncc-login__link-login">로그인</a><a class="ncc-login__link ncc-login__link-join">${serverName}</a></div>`,$("#nc-cnb .is-child-nav .ncc-login").html(e)}function createRightPanel(){var e="",t=account.alimList&&account.alimList.length,c=account.firstChar;t?$.each(account.alimList,function(t,c){e+=`<li class="on" id="alim_${c.id}"><div class="wrapNotice"><a><p class="noticeMsg">${c.logContent}&nbsp;-&nbsp;${moment(new Date(c.insertTime)).format("YYYY-MM-DD")}</p><a href="javascript:alimDelete(${c.id});" title="삭제">삭제</a><div class="thumb"><img class="icon" src="https://cdn.jsdelivr.net/gh/cckiss/web/img/${"NSHOP_BUY"==c.type?30005:"COUPON_USE"==c.type?30001:"NCOIN_GIFT"==c.type?30002:"CASH_CHARGE"==c.type?27011:27009}.png" alt="nickname"></div></a></div></li>`}):e=`<li class="on"><div class="wrapNotice"><a href="javascript:;"><p class="noticeMsg">알림이 없습니다.</p><div class="thumb"><img class="icon" src="https://cdn.jsdelivr.net/gh/cckiss/web/img/27009.png" alt="nickname"></div></a></div></li>`;var n=`<div class="ncc-userinfo" style="background-image: url('https://cdn.jsdelivr.net/gh/cckiss/web${c?account.firstChar.profileUrl:"https://cdn.jsdelivr.net/gh/cckiss/web/img/user_unkown.jpg"}');"><a class="ncc-right-panel-close">Close</a><div class="ncc-profile is-nc-account"><div class="ncc-profile-wrap"><a class="ncc-profile-img ic-home" href="/account/mypage" target="_self"><img src="https://cdn.jsdelivr.net/gh/cckiss/web${c?account.firstChar.profileUrl:"https://cdn.jsdelivr.net/gh/cckiss/web/img/user_unkown.jpg"}"></a><div class="ncc-profile-info"><span class="ncc-profile-info__char">${c&&0!=account.objId?account.firstChar.name:`대표 케릭터 미설정`}</span><span class="ncc-profile-info__server">${serverName}</span><span class="ncc-profile-info__level">${c?account.firstChar.level:0}Lv</span></div><div class="ncc-profile-links"><a class="ncc-profile-charchange">캐릭터 변경</a><a class="ncc-profile-logout" href="javascript:logout();">로그아웃</a></div></div><div class="nc-account-info"><p>${account.name}</p></div></div><nav class="ncc-shortcut"><strong class="blind">서비스 바로가기</strong><ul id="ncc-shortcut-list" class="ncc-shortcut-list ncc-shortcut-list-length4"><li class="ncc-shortcut-item"><a href="/account/mypage" class="ncc-shortcut-item__link"><i class="icon-shortcut icon-shortcut--mypage"></i><span class="desc" id="ncc-shortcut-databind-mypage">마이페이지</span></a></li><li class="ncc-shortcut-item"><a href="/goods" class="ncc-shortcut-item__link"><i class="icon-shortcut icon-shortcut--ncoin"></i><span class="desc" id="ncc-shortcut-databind-ncoin">${commaAdd(account.ncoin)}</span></a></li><li class="ncc-shortcut-item"><a href="javascript:openCouponPopup();" class="ncc-shortcut-item__link"><i class="icon-shortcut icon-shortcut--entercoupon"></i><span class="desc" id="ncc-shortcut-databind-entercoupon">쿠폰등록</span></a></li><li class="ncc-shortcut-item"><a href="/customer" class="ncc-shortcut-item__link"><i class="icon-shortcut icon-shortcut--cs"></i><span class="desc" id="ncc-shortcut-databind-cs">문의내역</span></a></li></ul></nav></div><div class="ncc-noti-wrap"><ul class="ncc-noti-tab"><li class="is-active"><a onClick="return false;">알림 <span class="is-on" style="background-color: #dc4141; ${t?"":"display: none;"}">${t?account.alimList.length:0}</span></a></li><li><a>접속친구</a></li></ul><div class="ncc-noti"><div class="ncc-noti-list" id="notiList"><div class="wrap_btns"><button class="imgBtn btnSetting">알림설정</button></div><ul>${e}</ul></div><div class="ncc-noti-setting" id="notiSetting" style="display: none;"><header class="setAll"><input type="checkbox" id="-1" ${account.alimReceive?"checked":""}><label for="-1">알림받기</label><p class="desc">서버에서 보내는 알림을 받습니다.</p></header><div class="wrap_btns"><button class="imgBtn btnApply">확인</button>&nbsp;<button class="imgBtn btnCancel">취소</button></div></div></div></div>`;if($(".ncc-right-panel > .ncc-right-panel-wrap").html(n),account.charList.length){var i="";$.each(account.charList,function(e,t){i+=`<li><span>${t.name}</span><input type="hidden" name="select_charter_choice" id="select_charter_choice" value="${t.objId}"/></li>`}),$(".ncc-character-panel .ncc-character-list-wrap .ncc-character-list").html(i)}}function createFooterHtml(){let e=`<div class="footer footer-kr"><div class="footer-links"><ul class="footer-links-list footer-links-list-kr"><li class="footer-links-items item1">${serverName}</li></ul></div><div class="footer-copyright"><div class="copyright-studio">Lineage \xae is a registered trademark of ${serverName} Corporation.</div><div class="copyright-company">Copyright \xa9 ${serverName} Corporation. <br> <span class="reserved">All Rights Reserved.</span></div></div><div class="footer-logo">${serverName}</div></div>`;$(".wrap-footer").html(e)}function initIncludeHTML(e,t){let c=new XMLHttpRequest;c.onreadystatechange=function(){4==this.readyState&&(200==this.status&&(e.innerHTML=this.responseText,"https://cdn.jsdelivr.net/gh/cckiss/web/cnb.html"==t&&(createCnbHtml(),"ingame"!==device&&createLoginHtml(),createCnbEvent())),404==this.status&&(e.innerHTML="Page not found."))},c.open("GET",t+"?"+cacheVersion,!0),c.send()}function createCnbEvent(){let e=$("body"),t=$(".ncc-search"),c=$(".ncc-search legend"),n=$(".ncc-search-close"),i=$("#nccSuggestInput"),s=$(".ncc-search-input-delete"),a=$(".ncc-ncservice-btn"),l=$(".ncc-left-panel-close"),r=$(".ncc-left-panel"),o=$(".ncc-login--after"),d=$(".ncc-right-panel-close"),p=$(".ncc-right-panel"),u=$(".ncc-profile-charchange"),h=$(".ncc-character-panel-close"),g=$(".ncc-character-panel"),m=$("#notiList > .wrap_btns > .btnSetting"),v=$("#notiSetting > .wrap_btns > .btnApply"),f=$("#notiSetting > .wrap_btns > .btnCancel"),b=($(".menu_item"),$(".ncc-dimmed")),y=$(".ncc-character-list > li"),C=$(".my-character-list .list .items");_show=function(t){t.addClass("is-active"),b.addClass("is-active-left"),e.addClass("ncc-dimmed")},_hide=function(t){t.removeClass("is-active"),b.removeClass("is-active-left"),e.removeClass("ncc-dimmed")},a.on("click",function(e){_show(r),eventStop(e)}),l.on("click",function(e){_hide(r),eventStop(e)}),o.on("click",function(e){_show(p),eventStop(e)}),d.on("click",function(e){_hide(p),eventStop(e)}),u.on("click",function(e){g.addClass("is-active"),eventStop(e)}),h.on("click",function(e){g.removeClass("is-active"),eventStop(e)}),t.click(function(e){e.stopPropagation()}),c.on("click",function(e){e.preventDefault(),showSearchField()}),n.on("click",()=>(hideSearchField(),!1)),s.on("click",function(e){return resetSearchField(),i.click().focus(),!1}),e.on("click",function(c){let n=$(c.target);var i=n.hasClass("ncc-left-panel"),s=n.hasClass("ncc-right-panel"),a=n.hasClass("ncc-character-panel"),l=n.hasClass("ncc-dimmed");i||s||a||!l||(r.removeClass("is-active"),p.removeClass("is-active"),g.removeClass("is-active"),b.removeClass("is-active-left"),e.removeClass("ncc-dimmed")),t.has(c.target).length||hideSearchField()}),y.on("click",function(e){if($(this).find("span").html()==$(".ncc-login--info__char").html()){g.removeClass("is-active"),eventStop(e);return}let t=$(this).find("#select_charter_choice").val(),c=window.location.href;t&&charChangeForm(t,c,"post","/account/chageCharacter")}),C.on("click",function(e){if($(this).find(".name").html()==$(".ncc-login--info__char").html()){$(".ui-signature .btn").removeClass("open"),$(".my-character-list").hide();return}let t=$(this).find("#select_charter_choice").val(),c=window.location.href;t&&charChangeForm(t,c,"post","/account/chageCharacter")}),m.on("click",function(e){$("#notiList").css("display","none"),$("#notiSetting").css("display","")}),v.on("click",function(e){noti_apply(),$("#notiSetting").css("display","none"),$("#notiList").css("display","")}),f.on("click",function(e){$("#notiSetting input[type=checkbox]").prop("checked",account.alimReceive),$("#notiSetting").css("display","none"),$("#notiList").css("display","")});var k=$("#nc-cnb .ncc-lnb-hover").width()>>1,w=0,A=0,S="undefined"==typeof pageCnbType?void 0:pageCnbType,_="undefined"==typeof pageCnbSubType?void 0:pageCnbSubType;if(S){$(".ncc-lnb").removeClass("ncc-lnb-type--main"),$(".ncc-lnb-item.m"+S).addClass("is-active"),$(".ncc-lnb .m"+S+" .ncc-lnb-item__sub > .s"+_).addClass("is-active");let T=$(".ncc-lnb .m"+S+" .ncc-lnb-item__sub > .s"+_);w=T&&T.offset()?parseInt(T.offset().left+(T.width()>>1)-k,10):0,A=T&&T.offset()?T.length?(94*T.width()/100*.01*1.4).toFixed(2):.1:0,$(".ncc-lnb-hover").css({transform:"translateX("+w+"px) scaleX("+A+")",opacity:"1"}),"ingame"===device||"launcher"===device?pageIngameCnbChange(S,_):pageCnbChange(S,_)}else("ingame"===device||"launcher"===device)&&pageIngameCnbChange(S,_);var j=$(".ncc-lnb-type--main");$(".ncc-lnb-item").hover(function(){$(".ncc-lnb-item").removeClass("is-active"),$(this).addClass("is-over"),j.addClass("ncc-lnb-type--main-over")},function(){$(this).removeClass("is-over"),j.removeClass("ncc-lnb-type--main-over"),S&&$(".ncc-lnb-item.m"+S).addClass("is-active")}),$(".ncc-lnb-item__sub > li").hover(function(){$(".ncc-lnb-item__sub > li").removeClass("is-active"),$(this).addClass("is-active");let e=parseInt($(this).offset().left+($(this).width()>>1)-k,10),t=$(this).length?(94*$(this).width()/100*.01*1.4).toFixed(2):.1;$(".ncc-lnb-hover").css({transform:"translateX("+e+"px) scaleX("+t+")",opacity:"1"})},function(){$(this).removeClass("is-active"),$(".ncc-lnb-hover").css({opacity:"0"}),S&&($(".ncc-lnb .m"+S+" .ncc-lnb-item__sub > .s"+_).addClass("is-active"),$(".ncc-lnb-hover").css({transform:"translateX("+w+"px) scaleX("+A+")",opacity:"1"}))}),$(window).scroll(function(){$(this).scrollTop()>100?$(".is-top").addClass("is-sticky"):$(".is-top").removeClass("is-sticky")}),$(".scrollbar-macosx").scrollbar()}mobiles.test(uAgent)&&(device="mobile"),"mobile"!==device&&(device=-1!==uAgent.indexOf("nc ingame")?"ingame":-1!==uAgent.indexOf("nc launcher")?"launcher":"pc"),"ingame"!==device||account||(location.href="/login_ingame"),document.addEventListener("contextmenu",e=>e.preventDefault()),$("body").addClass(device),initIncludeHTML(document.querySelector("#nc-cnb"),"https://cdn.jsdelivr.net/gh/cckiss/web/cnb.html"),initIncludeHTML(document.querySelector("#layer_alert"),"https://cdn.jsdelivr.net/gh/cckiss/web/popup.html"),createFooterHtml();var pre_suggest,suggestLock=!1,suggestTimeLock=!1;function searchInputKeyup(e,t){let c=t.keyCode;if(37!=c&&39!=c){var n=$(e).closest("#nccSuggestForm"),i=n.find("#nccSuggestWrap"),s=i.find("ul"),a=n.children(".ncc-search-input-delete"),l=$(e).val(),r=l.length;if(9==c){nccSuggestDirectionKey(e,!t.shiftKey);return}if(38==c){nccSuggestDirectionKey(e,!1);return}if(40==c){nccSuggestDirectionKey(e,!0);return}pre_suggest!=l&&(pre_suggest=l,r?(a.css("display","inline"),suggestLock||suggestTimeLock||"true"!=suggestEnable||(suggestTimeLock=!0,setTimeout(function(){var t=$(e).val();t.length&&nccSuggestAjax(t),suggestTimeLock=!1},1e3))):(s.children().remove(),i.css("display","none"),a.css("display","none")))}}function nccSuggestAjax(e){!suggestLock&&(suggestLock=!0,getDatasWithOption([{type:"POST",url:"/define/suggest",dataType:"json",contentType:"application/json",Accept:"application/json",data:{query:e,limit:10,type:"0"}}],e=>{if(e.length){$("#nccSuggestForm #nccSuggestWrap ul").children().remove();var t="";$.each(e,function(e,c){t+=`<li data-index="${e}" data-keyword="${c}" onClick="javascript:suggestClick(this);">${c}</li>`}),$("#nccSuggestForm #nccSuggestWrap ul").html(t),$("#nccSuggestForm #nccSuggestWrap").css("display","")}suggestLock=!1},e=>{suggestLock=!1}))}function nccSuggestDirectionKey(e,t){var c=$(e).closest("#nccSuggestForm"),n=c.find("#nccSuggestWrap > #nccSuggestList > div > ul > li");if(n.length){var i=c.find("#nccSuggestWrap > #nccSuggestList > div > ul > .focus");if(i.length){var s=Number(i.attr("data-index"));c.find("#nccSuggestWrap ul li").removeClass("focus"),c.find("#nccSuggestWrap ul li[data-index="+(t?s+1:s-1)+"]").addClass("focus")}else c.find("#nccSuggestWrap ul li[data-index="+(t?0:n.length-1)+"]").addClass("focus");$(e).val($("#nccSuggestWrap > #nccSuggestList > div > ul > .focus").attr("data-keyword"))}}function pageCnbChange(e,t){let c=$(".wrap-header .header .header-title").html(),n=$(".ncc-lnb-wrap .ncc-lnb .ncc-lnb-list .ncc-lnb-item.m"+e),i=n.children("a").attr("href"),s=n.children(".ncc-lnb-item__sub").children("li"),a="";$.each(s,function(e,t){a+=`<span class="ncc-depth2-list-items s${e+1}"><a href="${t.children("a").attr("href")}">${t.find("span").html()}</a></span>`});let l=`<nav class="ncc-lnb-title" style="z-index:1;"><p class="ncc-lnb-title--current"><a href="${i}">${c}</a></p><div class="ncc-depth2-list-wrap" id="ncc-depth2-tap"><div class="ncc-depth2-scroller" style="display:inline-block;"><div class="ncc-depth2-list">${a}</div></div></div></nav>`;$(".ncc-gnb-wrap").append(l),$(".ncc-lnb-title .ncc-depth2-list .ncc-depth2-list-items.s"+t).addClass("selected"),$(".ncc-gnb-wrap .ncc-bi").css("display","none")}function pageIngameCnbChange(e,t){let c=$(".ncc-lnb-wrap .ncc-lnb .ncc-lnb-list .ncc-lnb-item.m"+e),n=$(".ncc-lnb-wrap .ncc-lnb .ncc-lnb-list .ncc-lnb-item > a"),i=c.children(".ncc-lnb-item__sub").children("li"),s="";$.each(n,function(e,t){s+=`<a href="${t.attr("href")}">${t.find("span").html()}</a>`});let a="";$.each(i,function(e,t){a+=`<span class="ncc-depth2-list-items s${e+1}"><a href="${t.children("a").attr("href")}">${t.find("span").html()}</a></span>`});let l=`<nav class="ncc-lnb-title" style="z-index:1;"><p class="ncc-lnb-title--current"><a href="/">홈</a>${s}</p>${a.length?`<div class="ncc-depth2-list-wrap" id="ncc-depth2-tap"><div class="ncc-depth2-scroller" style="display:inline-block;"><div class="ncc-depth2-list">${a}</div></div></div>`:""}</nav>`;if($(".ncc-gnb-wrap").append(l),e){let r=Number(e)-(Number(e)>4?1:0);$(".ncc-lnb-title .ncc-lnb-title--current > a").eq(r).addClass("selected"),$(".ncc-lnb-title .ncc-depth2-list .ncc-depth2-list-items.s"+t).addClass("selected")}$(".ncc-gnb-wrap .ncc-bi").css("display","none")}function createSessionConfig(e,t){switch(e){case"/notice/view":case"/update/view":case"/event/view":setSession("COMMUNITY_INFINITE_LIST",JSON.stringify(communityInfiniteList={board:"notice",type:t,list_count:$("#cursize").val(),scroll_Y:window.scrollY}));break;case"/board/view":setSession("COMMUNITY_INFINITE_LIST",JSON.stringify(communityInfiniteList={board:"free",list_count:$("#cursize").val(),scroll_Y:window.scrollY}));break;case"/contents/view":setSession("COMMUNITY_INFINITE_LIST",JSON.stringify(communityInfiniteList={board:"content",list_count:$("#cursize").val(),scroll_Y:window.scrollY}));break;case"/pitch/view":setSession("COMMUNITY_INFINITE_LIST",JSON.stringify(communityInfiniteList={board:"pitch",list_count:$("#cursize").val(),scroll_Y:window.scrollY}));break;case"/goods/view":if("undefined"==typeof current_page_number)return;setSession("PAGINATION_INFINITE_LIST",JSON.stringify(paginationInfiniteList={page_type:"goods",page_number:current_page_number,scroll_Y:window.scrollY}))}}function urlform(e,t,c){createSessionConfig(c);var n=document.createElement("form");if(n.setAttribute("charset","UTF-8"),n.setAttribute("method",t),n.setAttribute("action",c),void 0!=e&&null!=e&&"null"!=e){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name","num"),i.setAttribute("value",e),n.appendChild(i)}document.body.appendChild(n),n.submit()}function urlTypeform(e,t,c,n){createSessionConfig(n,e);var i=document.createElement("form");if(i.setAttribute("charset","UTF-8"),i.setAttribute("method",c),i.setAttribute("action",n),void 0!=e&&null!=e&&"null"!=e){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","type"),s.setAttribute("value",e),i.appendChild(s)}if(void 0!=t&&null!=t&&"null"!=t){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","num"),s.setAttribute("value",t),i.appendChild(s)}document.body.appendChild(i),i.submit()}function urlQueryform(e,t,c){var n=document.createElement("form");if(n.setAttribute("charset","UTF-8"),n.setAttribute("method",t),n.setAttribute("action",c),void 0!=e&&null!=e&&"null"!=e){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name","query"),i.setAttribute("value",e),n.appendChild(i)}document.body.appendChild(n),n.submit()}function charChangeForm(e,t,c,n){var i=document.createElement("form");if(i.setAttribute("charset","UTF-8"),i.setAttribute("method",c),i.setAttribute("action",n),void 0!=t&&null!=t&&"null"!=t){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","urlType"),s.setAttribute("value",t),i.appendChild(s)}if(void 0!=e&&null!=e&&"null"!=e){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","num"),s.setAttribute("value",e),i.appendChild(s)}document.body.appendChild(i),i.submit()}function login(){var e=document.createElement("form");e.setAttribute("charset","UTF-8"),e.setAttribute("method","post"),e.setAttribute("action","ingame"===device?"/login_ingame":"/login");var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","urlType"),t.setAttribute("value",window.location.href),e.appendChild(t),document.body.appendChild(e),e.submit()}function loginIngame(){var e=document.createElement("form");e.setAttribute("charset","UTF-8"),e.setAttribute("method","post"),e.setAttribute("action","/login_ingame");var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","urlType"),t.setAttribute("value",window.location.href),e.appendChild(t),document.body.appendChild(e),e.submit()}function logout(){"launcher"===device?getDatasWithOption(["/define/logout"],e=>{},e=>{throw Error("logout from common.js Error")}):location.href="/account/logout"}function totalSearchCheck(){return!!nccSuggestForm.query.value&&(nccSuggestForm.action="/search",!0)}function suggestClick(e){nccSuggestForm.query.value=$(e).attr("data-keyword"),nccSuggestForm.action="/search",nccSuggestForm.submit()}function showSearchField(){$(".ncc-search").hasClass("is-active")||($(".ncc-search").addClass("is-active"),$(".ncc-search legend").css("display","none"),$(".ncc-lnb").addClass("search-active"),window.setTimeout(()=>{$(".ncc-search-input").click().focus()},300))}function hideSearchField(){$(".ncc-search").hasClass("is-active")&&($(".ncc-search").removeClass("is-active"),$(".ncc-search legend").fadeIn(),$(".ncc-lnb").removeClass("search-active"),this.resetSearchField())}function resetSearchField(){$("#nccSuggestWrap").css("display","none"),$("#nccSuggestWrap ul").children().remove(),$(".ncc-search-input").val(""),$(".ncc-search-input-delete").hide()}let alime_deleted=!1;function alimDelete(e){!alime_deleted&&(alime_deleted=!0,getDatasWithOption([{type:"POST",url:"/define/alim/delete",dataType:"json",contentType:"application/json",Accept:"application/json",data:{id:e}}],t=>{$("#notiList #alim_"+e).remove(),t.length?$(".ncc-noti-tab span").html(t.length):($(".ncc-noti-tab span").css("display","none"),$("#notiList ul").append('<li class="on"><div class="wrapNotice"><a href="javascript:;"><p class="noticeMsg">알림이 없습니다.</p><div class="thumb"><img class="icon" src="https://cdn.jsdelivr.net/gh/cckiss/web/img/27009.png" alt="nickname"></div></a></div></li>')),alime_deleted=!1},e=>{throw alime_deleted=!1,Error("alimDelete from common.js Error")}))}function noti_apply(){let e=$("#notiSetting input[type=checkbox]").prop("checked");e!=account.alimReceive&&getDatasWithOption([{type:"POST",url:"/define/alim/setting",dataType:"json",contentType:"application/json",Accept:"application/json",data:{is_receive:e}}],t=>{t&&(account.alimReceive=e)},e=>{throw Error("noti_apply from common.js Error")})}const windowObjects=[];function ingameCustomBrowser(){"ingame"===device&&"customBrowser"!==window.name&&(openPopup(window.location.href,800,650,"customBrowser",1,0,!1,!0),$("body").html('<div id="customForm"><h1 style="text-align: center;">새롭게 생성된 임시 브라우저에서 이용하십시오.</h1></div>'))}function openPopup(e,t,c,n,i,s,a,l,r){try{if(1!==i&&0!==i&&"1"!==i&&"0"!==i){var o=i;i=n,n=o}if(navigator.platform.toUpperCase().indexOf("MAC")>=0)var d=c+22;else var d=c;if("string"==typeof e){var p="width="+t+",height="+c+", innerHeight="+d+",toolbar=no,location=no,status=no,menubar=no,top=20,left=20,scrollbars="+i+",resizable=no";""!=n&&n||(n="popup"),a&&(p="fullscreen=1,scrollbars=0");var u=window.open(e,n,p);return null!=u&&u.focus(),l&&windowObjects.push(u),u}n||(n="popup"),i||(i="auto");var h=r?e.href+"?"+r:e.href,p="width="+t+",height="+c+", innerHeight="+d+",toolbar=no,location=no,status=no,menubar=no,top=20,left=20,scrollbars="+i+",resizable=no";a&&(p="fullscreen=1,scrollbars=0");var u=window.open(h,n,p);return s&&(null==u?alert("팝업 차단을 해제하여 주시기 바랍니다."):u.focus()),l&&windowObjects.push(u),u}catch(g){}}function get_account_from_launcher(){let e={NCOIN:account?commaAdd(account.ncoin):0,NPOINT:account?commaAdd(account.npoint):0};return e}function get_gamestart_auth_from_launcher(e){if("launcher"!==device)return{AUTH_CODE:2};if(!account)return{AUTH_CODE:3};if(!e)return{AUTH_CODE:5};let t=0;return $.ajax({url:"/define/gamestart",type:"GET",dataType:"json",data:{token:e},async:!1,success(e){t=e}}),{AUTH_CODE:t}}function showError(e,t,c){var n=`<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/cckiss/web/css/error.css"><div class="error-container" id="container"><div class="logo"><a class="logo-link" href="/"><img src="https://cdn.jsdelivr.net/gh/cckiss/web/img/plaync.png" alt="plaync icon"/></a></div><div class="error-contents-wrap"><header class="error-header"><h1 class="title">일시적으로 페이지를 불러올 수 없습니다.</h1><p class="subcopy">동일한 문제가 지속적으로 발생할 경우, 고객지원으로 문의해 주시기 바랍니다.</p></header><div class="error-contents"><div class="error-btn-wrap"><button class="btn btn-error btn-error--o btn-back" onclick="history.go(-1);">이전 페이지</button><a href="/customer" class="btn btn-error btn-inquiry">고객지원</a></div><div class="links"><a href="/"><span>홈</span></a></div></div></div><footer id="footer" class="error-footer-wrap"><p class="copyright">Ⓒ ${serverName} Corporation. All Rights Reserved.</p></footer></div>`;throw $("body").html(n),Error("init setting from init.js Error")}window.onunload=function(){if(windowObjects.length)for(var e of windowObjects)e.close()};
