/*!
 * project : promotion
 * author : LINOFFICE
 * 메인 페이지 프로모션 함수
 */ const promoMax=16;function promoFileChange(o){$(o).closest(".filebox").find(".upload-name").val($(o).val())}function promotionUtilForm(o){$("#container").append('<div class="promotionUtilForm"><div class="promotionUtilForm_container"><form name="promoForm" onsubmit="return false;"><h1>프로모션</h1><input type="hidden" name="promoId" id="promoId" /><input type="hidden" name="dividPath" id="dividPath" value="PROMO_"/><div class="util_items"><label>제목</label><input type="text" name="promoTitle" id="promoTitle" placeholder="필수항목" /></div><div class="util_items"><label>내용</label><input type="text" name="promoContent" id="promoContent" placeholder="필수항목" /></div><div class="util_items"><label>날짜</label><input type="text" name="promoDate" id="promoDate" placeholder="생략가능" /></div><div class="util_items"><label>링크</label><input type="text" name="promoLink" id="promoLink" placeholder="필수항목(이동 경로)" /></div><div class="util_items filebox"><label>이미지</label><i><input class="upload-name" id="promoImgStr" name="promoImgStr" placeholder="필수항목(이미지 파일)" readonly><label class="file-label" for="promoImg">파일찾기</label><input type="file" name="promoImg" id="promoImg" class="file" onchange="promoFileChange(this);" ></i></div><div class="util_items filebox"><label>작은 이미지</label><i><input class="upload-name" id="promoSubImgStr" name="promoSubImgStr" placeholder="필수항목(이미지 파일)" readonly><label class="file-label" for="promoSubImg">파일찾기</label><input type="file" name="promoSubImg" id="promoSubImg" class="file" onchange="promoFileChange(this);" ></i></div>'+("update"==o?'<div class="btns"><button onClick="promotionCancel();return false;">취소</button><button onClick="promotionUpdate();return false;">수정</button></div>':'<div class="btns"><button onClick="promotionCancel();return false;">취소</button><button onClick="promotionAdd();return false;">추가</button></div>')+"</form></div></div>"),$("body").addClass("ncc-dimmed")}function promotionInsert(o,t){let e=$(".section-promotion__listall .wrap-listall > ul > li").length;if(e>=16){alert("프로모션은 최대 16개까지 등록할 수 있습니다.");return}promotionUtilForm("insert")}function promotionAdd(){var o=document.promoForm;if(!o.promoTitle.value||!o.promoContent.value||!o.promoLink.value||!o.promoImg.value||!o.promoSubImg.value){alert("필수항목을 입력하십시오.");return}if($("#promoImg").prop("files")[0].size>1048576||$("#promoSubImg").prop("files")[0].size>1048576){alert("이미지는 1MB이하로 등록하십시오.");return}var t=new FormData(o);$.ajax({data:t,type:"POST",url:"/define/promotion/insert",contentType:!1,processData:!1,cache:!1,timeout:6e5,success:function(o){o&&(location.href="/index")},error:function(o,t,e){throw Error("promotionAdd from main.js Error")}})}function promotionModify(o,t){promotionUtilForm("update");let e=$(t).closest("li");$(".promotionUtilForm #promoId").val(o),$(".promotionUtilForm #promoTitle").val(e.attr("data-title")),$(".promotionUtilForm #promoContent").val(e.attr("data-content")),$(".promotionUtilForm #promoDate").val(e.attr("data-date")),$(".promotionUtilForm #promoLink").val(e.attr("data-link")),$(".promotionUtilForm #promoImg").closest(".filebox").find(".upload-name").val(e.attr("data-img")),$(".promotionUtilForm #promoSubImg").closest(".filebox").find(".upload-name").val(e.attr("data-subimg"))}function promotionUpdate(){var o=document.promoForm;if(!o.promoId.value||!o.promoTitle.value||!o.promoContent.value||!o.promoLink.value||!o.promoImgStr.value||!o.promoSubImgStr.value){alert("필수항목을 입력하십시오.");return}let t=$("#promoImg").prop("files")[0],e=$("#promoSubImg").prop("files")[0];if(t&&t.size>1048576||e&&e.size>1048576){alert("이미지는 1MB이하로 등록하십시오.");return}var i=new FormData(o);$.ajax({type:"POST",processData:!1,contentType:!1,cache:!1,url:"/define/promotion/update",data:i,timeout:6e5,success:function(o){o&&(location.href="/index")},error:function(o,t,e){throw Error("promotionUpdate from main.js Error")}})}function promotionDelete(o){confirm("정말로 삭제 하시겠습니까?")&&$.ajax({type:"POST",datatype:"json",url:"/define/promotion/delete",data:{id:o},success:function(o){o&&(location.href="/index")},error:function(o,t,e){throw Error("promotionDelete from main.js Error")}})}function promotionCancel(){$(".promotionUtilForm").remove(),$("body").removeClass("ncc-dimmed")}